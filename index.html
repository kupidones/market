<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>No Swipe Close App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background-color: #000000;
        color: #ffffff;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 20px;
        /* –ó–∞–ø—Ä–µ—â–∞–µ–º —Å–∫—Ä–æ–ª–ª */
        overflow: hidden;
      }

      .swipe-blocker {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #000000;
        z-index: 1000;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }

      .status-panel {
        background: rgba(255, 255, 255, 0.1);
        padding: 20px;
        border-radius: 15px;
        margin: 10px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .close-button {
        background: rgba(255, 0, 0, 0.3);
        color: white;
        border: 1px solid rgba(255, 255, 255, 0.3);
        padding: 12px 24px;
        border-radius: 8px;
        cursor: pointer;
        margin-top: 20px;
        font-size: 16px;
      }

      .swipe-warning {
        background: rgba(255, 255, 0, 0.2);
        padding: 10px;
        border-radius: 8px;
        margin: 10px 0;
        font-size: 14px;
      }
    </style>
  </head>
  <body>
    <div class="swipe-blocker">
      <div class="status-panel">
        <h1>üö´ No Swipe Close</h1>
        <p>–ó–∞–∫—Ä—ã—Ç–∏–µ —Å–≤–∞–π–ø–æ–º –æ—Ç–∫–ª—é—á–µ–Ω–æ</p>
      </div>

      <div class="status-panel" id="swipeStatus">
        <div class="swipe-warning">‚ö†Ô∏è –ù–µ–ª—å–∑—è –∑–∞–∫—Ä—ã—Ç—å —Å–≤–∞–π–ø–æ–º!</div>
        <p>–°—Ç–∞—Ç—É—Å —Å–≤–∞–π–ø–æ–≤: –∑–∞–≥—Ä—É–∑–∫–∞...</p>
      </div>

      <div class="status-panel" id="appStatus">
        –°—Ç–∞—Ç—É—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: –∑–∞–≥—Ä—É–∑–∫–∞...
      </div>

      <button class="close-button" onclick="closeApp()">
        ‚ùå –ó–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—Ç–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫–æ–π)
      </button>
    </div>

    <script>
      const tg = window.Telegram.WebApp;

      function initializeNoSwipeApp() {
        // 1. –£–≤–µ–¥–æ–º–ª—è–µ–º Telegram, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ
        tg.ready();

        // 2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —á–µ—Ä–Ω—ã–π —Ñ–æ–Ω
        tg.setBackgroundColor("#000000");
        tg.setHeaderColor("#000000");

        // 3. –†–∞—Å—à–∏—Ä—è–µ–º –Ω–∞ –≤—Å—é –≤—ã—Å–æ—Ç—É
        tg.expand();

        // 4. –û–¢–ö–õ–Æ–ß–ê–ï–ú –í–ï–†–¢–ò–ö–ê–õ–¨–ù–´–ï –°–í–ê–ô–ü–´ –î–õ–Ø –ó–ê–ö–†–´–¢–ò–Ø
        tg.disableVerticalSwipes();

        // 5. –í–∫–ª—é—á–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏—è
        tg.enableClosingConfirmation();

        // 6. –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
        if (tg.isVersionAtLeast("6.1")) {
          tg.requestFullscreen();
        }

        updateAppStatus();
        console.log("–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ —Å –æ—Ç–∫–ª—é—á–µ–Ω–Ω—ã–º–∏ —Å–≤–∞–π–ø–∞–º–∏");
      }

      function updateAppStatus() {
        const swipeElement = document.getElementById("swipeStatus");
        const appElement = document.getElementById("appStatus");

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ª–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å–≤–∞–π–ø–æ–≤
        const supportsSwipeControl = tg.isVersionAtLeast("6.7");

        swipeElement.innerHTML = `
                <div class="swipe-warning">
                    ‚ö†Ô∏è –ù–µ–ª—å–∑—è –∑–∞–∫—Ä—ã—Ç—å —Å–≤–∞–π–ø–æ–º!
                </div>
                <p><strong>–°–≤–∞–π–ø—ã –æ—Ç–∫–ª—é—á–µ–Ω—ã:</strong> –î–ê ‚úÖ</p>
                <p><strong>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–≤–∞–π–ø–∞–º–∏:</strong> ${
                  supportsSwipeControl ? "–î–ê ‚úÖ" : "–í–ï–†–°–ò–Ø 6.7+ ‚ùå"
                }</p>
            `;

        appElement.innerHTML = `
                <p><strong>Fullscreen:</strong> ${
                  tg.isFullscreen ? "–î–ê ‚úÖ" : "–ù–ï–¢ ‚ùå"
                }</p>
                <p><strong>Expanded:</strong> ${
                  tg.isExpanded ? "–î–ê ‚úÖ" : "–ù–ï–¢ ‚ùå"
                }</p>
                <p><strong>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:</strong> ${tg.platform}</p>
                <p><strong>–í–µ—Ä—Å–∏—è Telegram:</strong> ${tg.version}</p>
            `;
      }

      function closeApp() {
        if (confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∑–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ?")) {
          tg.close();
        }
      }

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
      tg.onEvent("viewportChanged", updateAppStatus);
      tg.onEvent("fullscreenChanged", updateAppStatus);

      // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –∂–µ—Å—Ç–æ–≤
      document.addEventListener(
        "touchmove",
        function (e) {
          // –ë–ª–æ–∫–∏—Ä—É–µ–º –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —Å–≤–∞–π–ø—ã
          if (e.touches.length === 1) {
            const touch = e.touches[0];
            const startY = touch.clientY;

            // –ï—Å–ª–∏ —ç—Ç–æ —è–≤–Ω—ã–π –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Å–≤–∞–π–ø - –±–ª–æ–∫–∏—Ä—É–µ–º
            if (Math.abs(touch.clientY - startY) > 10) {
              e.preventDefault();
            }
          }
        },
        { passive: false }
      );

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
      document.addEventListener("DOMContentLoaded", initializeNoSwipeApp);

      // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
      setInterval(updateAppStatus, 3000);
    </script>
  </body>
</html>
